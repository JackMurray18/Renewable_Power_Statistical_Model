---
title: "Sample Solar manipualtion"
author: "Jack Murray"
date: "2/12/2022"
output: html_document
---

#data read in / library
----------------------
```{r}
library(tidyverse)
library(lubridate)
```
```{r}
date.loc.solar_CLE <- read.csv("C:/Users/jackm/Desktop/Data Science/Project/1998-2022 CLE solar data.csv")
```

GHI --> Global horizontal irradiance
        *location influenced measure of solar radiation 
        *GHI = DHI + DNI X cos (z) where z is the solar zenith angle 
        *good measurements for solar panel production 
        
DNI --> Direct normal irradiance
        *measure of the amount of radiation coming in the direction of the sun
        *effected by the cloud cover and particles in the atmosphere

DHI --> Diffuse horizontal irradiance
        *amount of radiation deflected by the atmosphere
        *large values indicate cloud cover and less radiation reaching the ground

#Average Radiation Per Day
--------------------------
```{r averages}
Daily_Solar_CLE <- date.loc.solar_CLE %>%
  group_by(DATE) %>%
  summarise(daily_DHI = mean(DHI.num),
            daily_DNI = mean(DNI.num),
            daily_GHI = mean(GHI.num))
 head(Daily_Solar_CLE,10)
```
graphs
```{r plot}
plotdate <- Daily_Solar_CLE %>%
  pivot_longer(cols = c(daily_DHI,daily_DNI,daily_GHI),
               names_to = "Radiation type")

plotdate %>%
  filter(year(DATE)==c(2020,1998)) %>%
  ggplot(aes(yday(DATE),value, color = `Radiation type`))+
  geom_point()+
  geom_smooth(se = FALSE)+
  facet_grid(cols = vars(year(DATE)))+
  labs(x = "Date",
       y = "W/m^2",
       title = "Solar Radiation vs Date")
```
More solar radiation in the summer 
  * more direct from the sun 
  * less cloud cover 
more variation in solar radiation in the summer too
  * some very sunny days and some stormy/cloudy days. Whereas in the winter its always cloudy
More diffusion (lost solar radiation) in the summer
  * only because there more coming 
  * larger percentage of solar radiation is diffused in the winter
  
Possible some increase in solar radiation in the past 2 decades

#Average RAdtiation per month
-----------------------------
```{r}
monthly <- Daily_Solar_CLE %>%
  mutate(mon = month(DATE),
         yr = year(DATE))%>%
  group_by(yr,mon)%>%
  summarise(mon_DHI = mean(daily_DHI),
            mon_DNI = mean(daily_DNI),
            mon_GHI = mean(daily_GHI))
head(monthly,6)
```
```{r}
plotmonth <- monthly %>%
  select(-mon_DHI)%>%
  pivot_longer(cols = c(mon_DNI,mon_GHI),
               names_to = "Radiation type")
plotmonth %>%
  mutate(DATE = ymd(paste(yr,mon,1,sep = "-")))%>%
  ggplot(aes(DATE,value, color = `Radiation type`))+
  geom_point()+
  geom_smooth(se = FALSE)+
  labs(x = "Month",
       y = "W/m^2",
       title = "Solar Radiation vs Time")
```
Difficult to say if there if there is a trend in the average solar radiation 

#Histogram of daily average radiation
-------------------------------------
```{r plot}
plotdate %>%
  filter(`Radiation type`=="daily_GHI") %>%
  ggplot(aes(value))+
  geom_histogram(binwidth = 40, alpha =.4, color = "blue", fill = "blue")+
  labs(x = "W/m2",
       title = "Histogram of Daily Average Radiation")

```
Like wind speed - the solar radiation has a gamma distribution 
  * few days have 0 solar radiation 
  * the most have between 50-150 W/m^2 
  * data is positively skewed 
